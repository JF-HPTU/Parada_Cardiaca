query = "select pactid tipodocumento, pacide documento, (pacnom || ' ' || pacap1 || ' ' || pacap2) nombre, pachis historia, (clsnom || ' / ' || ubinom) ubicacion, epiinahab habitacion, to_char(pacnac, 'YYYY/MM/DD') fechanacimiento, (CASE WHEN ((sysdate - pacnac)/365.25) >= 1 THEN trunc((sysdate - pacnac)/365.25) ELSE trunc((sysdate - pacnac)/30) END) || ' ' || (CASE WHEN ((sysdate - pacnac)/365.25) >= 1 THEN 'AÃ±os' ELSE 'Meses' END) edad, (select regdianom from hhregdia where regdiasrc = regclisec and regdiappl = 'S') diagnosticoprinciapl, (select rtrim (xmlagg (xmlelement (e, regdianom || ', ')).extract ('//text()'), ' , ')  from hhregdia where regdiasrc = regclisec and regdiappl <> 'S') diagnosticosecundario, to_char(regclifch, 'YYYY/MM/DD HH24:MI') fechanota from hhregcli inner join hiepiina on epiinaepi = regcliepi and epiinafen >= (sysdate - 10) inner join abpac on pachis = epiinahis and (TRUNC(sysdate -pacnac) / 365.25) >= 15 and (TRUNC(sysdate -pacnac) / 365.25) <= 65 inner join inubi on ubicod = epiinaubi inner join inser on sercod = ubiser inner join incls on clscod = sercla where regclipro = 'C010' and regclifch >= (sysdate - 10 / 1440)"

SetVar('query', query)